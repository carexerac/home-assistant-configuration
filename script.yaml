flash_light:
  alias: Flash light
  sequence:
    # - condition: template
    #   value_template: "{{ light_entity_id == '' }}"
    - service: light.turn_on
      # Using the variables in the script requires the use of data_template:
      data_template:
        entity_id: '{{ light_entity_id }}'
    - delay:
        milliseconds: 200
    - service: light.turn_off
      data_template:
        entity_id: '{{ light_entity_id }}'
    - service: script.flash_light_loop
      data_template:
        light_entity_id: '{{ light_entity_id }}'

flash_light_loop:
  alias: Flash light loop
  sequence:
    - delay:
        milliseconds: 200
    - service: script.flash_light
      data_template:
        light_entity_id: '{{ light_entity_id }}'

good_night:
  alias: Good night
  sequence:
    - service: switch.turn_off
      entity_id: switch.tv
    - service: switch.turn_off
      entity_id: group.living_room
    - service: light.turn_off
      entity_id: group.living_room
    - service: switch.turn_off
      entity_id: group.dining_room
    - service: light.turn_off
      entity_id: group.dining_room
    - service: light.turn_on
      entity_id: light.mp_bed_light

movie_time:
  alias: Movie time
  sequence:
    - service: switch.turn_on
      entity_id: switch.chromecast
    - service: switch.turn_off
      entity_id: switch.wall_switch_158d00014a1a13
    - service: switch.turn_off
      entity_id: switch.wall_switch_158d00014dcb6a
    - service: light.turn_on
      entity_id: light.ambient_yeelight
      data:
        effect: "Stop"
        color_name: "white"
        brightness_pct: 40

party_time:
  alias: Party time
  sequence:
    - service: light.turn_on
      entity_id: light.ambient_yeelight
      data:
        effect: "Strobe color"
        brightness_pct: 100
    - service: switch.turn_off
      entity_id: switch.wall_switch_158d00014a1a13
    - service: switch.turn_on
      entity_id: switch.wall_switch_158d00014dcb6a
    - delay:
        milliseconds: 500
    - service: switch.turn_on
      entity_id: switch.wall_switch_158d00014a1a13
    - service: switch.turn_off
      entity_id: switch.wall_switch_158d00014dcb6a
    - delay:
        milliseconds: 500
    - service: switch.turn_on
      entity_id: switch.wall_switch_158d00014a1a13
    - service: switch.turn_on
      entity_id: switch.wall_switch_158d00014dcb6a
    - delay:
        milliseconds: 500
    - service: switch.turn_off
      entity_id: switch.wall_switch_158d00014a1a13
    - service: switch.turn_off
      entity_id: switch.wall_switch_158d00014dcb6a
    - service: light.turn_on
      entity_id: light.ambient_yeelight
      data:
        # effect: "Slowdown"
        effect: "Disco"
        brightness_pct: 100

mute_tv:
  alias: Mute TV
  sequence:
    - service: remote.send_command
      data_template:
        entity_id: remote.harmony_hub
        command: Mute
        device: 42051938

channel_2:
  alias: Channel 2 TV
  sequence:
    - service: remote.send_command
      data_template:
        entity_id: remote.harmony_hub
        command: Number2
        device: 42051938

geek_inc:
  alias: Geek Inc
  sequence:
    - service: switch.turn_on
      entity_id: switch.chromecast
    # wait until media player have stop the playing
    - wait_template: "{{ is_state('device_tracker.chromecast', 'home') }}"
    - service: media_extractor.play_media
      data_template:
        entity_id: media_player.salon
        media_content_id: https://www.twitch.tv/geek_inc
        media_content_type: video/mp4