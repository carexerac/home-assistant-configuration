flash_light:
  alias: Flash light
  sequence:
    # - condition: template
    #   value_template: "{{ light_entity_id == '' }}"
    - service: light.turn_on
      # Using the variables in the script requires the use of data_template:
      data_template:
        entity_id: '{{ light_entity_id }}'
    - delay:
        milliseconds: 200
    - service: light.turn_off
      data_template:
        entity_id: '{{ light_entity_id }}'
    - service: script.flash_light_loop
      data_template:
        light_entity_id: '{{ light_entity_id }}'

flash_light_loop:
  alias: Flash light loop
  sequence:
    - delay:
        milliseconds: 200
    - service: script.flash_light
      data_template:
        light_entity_id: '{{ light_entity_id }}'

turn_on_light_briefly:
  alias: Turn on a light for a limited period of time
  sequence:
    - service: light.turn_on
      data_template:
        entity_id: '{{ entity_id }}'
    - delay: '{{ delay }}'
    - service: light.turn_off
      data_template:
        entity_id: '{{ entity_id }}'

party_time:
  alias: Party time
  sequence:
    - service: light.turn_on
      entity_id: light.ambient_yeelight
      data:
        effect: "Strobe color"
        brightness_pct: 100
    - service: light.turn_off
      entity_id: light.dining_room_ceiling
    - service: light.turn_on
      entity_id: light.living_room_ceiling
    - delay:
        milliseconds: 500
    - service: light.turn_on
      entity_id: light.dining_room_ceiling
    - service: light.turn_off
      entity_id: light.living_room_ceiling
    - delay:
        milliseconds: 500
    - service: light.turn_on
      entity_id: light.dining_room_ceiling
    - service: light.turn_on
      entity_id: light.living_room_ceiling
    - delay:
        milliseconds: 500
    - service: light.turn_off
      entity_id: light.dining_room_ceiling
    - service: light.turn_off
      entity_id: light.living_room_ceiling
    - service: light.turn_on
      entity_id: light.ambient_yeelight
      data:
        # effect: "Slowdown"
        effect: "Disco"
        brightness_pct: 100
    - service: light.turn_on
      entity_id: light.yeelight_guinea_pig
      data:
        # effect: "Slowdown"
        effect: "Disco"
        brightness_pct: 100
    - service: light.turn_on
      entity_id: light.sofa_yeelight_strip
      data:
        # effect: "Slowdown"
        effect: "Disco"
        brightness_pct: 100

mute_tv:
  alias: Mute TV
  sequence:
    - service: remote.send_command
      data_template:
        entity_id: remote.harmony_hub
        command: Mute
        device: 42051938

channel_2:
  alias: Channel 2 TV
  sequence:
    - service: remote.send_command
      data_template:
        entity_id: remote.harmony_hub
        command: Number2
        device: 42051938

geek_inc:
  alias: Geek Inc
  sequence:
    - service: switch.turn_on
      entity_id: switch.tv
    # wait until media player have stop the playing
    - wait_template: "{{ is_state('device_tracker.chromecast', 'home') }}"
    - service: media_extractor.play_media
      data_template:
        entity_id: media_player.salon
        media_content_id: https://www.twitch.tv/studiorenegade
        media_content_type: video/mp4

cast_car_location:
  sequence:
    - service: media_player.play_media
      data_template:
        entity_id: media_player.chromecast
        media_content_id: "https://www.mapquestapi.com/staticmap/v4/getplacemap?key={{states.sensor.mapquest_api_key.state}}&location={{states.device_tracker.ford_fiesta.attributes.latitude}},{{states.device_tracker.ford_fiesta.attributes.longitude}}&size=1280,720&type=map&zoom=17&imagetype=png&scalebar=false&showicon=blue-C"
        media_content_type: image/png

send_car_location_to_mp:
  sequence:
    - service: notify.telegram_mp
      data_template:
        title: Car location
        message: Here is the location of the car.
        data:
          location:
            latitude: '{{ states.device_tracker.ford_fiesta.attributes.latitude }}'
            longitude: '{{ states.device_tracker.ford_fiesta.attributes.longitude }}'
